<div class="attendance-container">
  <!-- Header simplificado -->
  <header class="class-header">
    <div class="header-content">
      <button class="back-btn" routerLink="/dashboard">
        â† Dashboard
      </button>
      <div class="class-info">
        <h1>ğŸ“‹ Lista de Asistencia</h1>
        <p>Pasa lista como en la escuela</p>
      </div>
    </div>
  </header>

  <main class="class-main">
    <!-- Panel de configuraciÃ³n rÃ¡pida -->
    <div class="class-setup">
      <div class="setup-row">
        <div class="field-group">
          <label>ğŸ“… Fecha</label>
          <input type="date" [(ngModel)]="attendanceDate" class="date-input">
        </div>
        
        <div class="field-group">
          <label>ğŸ“ Tipo de Actividad</label>
          <div class="type-selector">
            <button 
              *ngFor="let type of attendanceTypes" 
              class="type-btn"
              [class.active]="attendanceType === type.value"
              (click)="attendanceType = type.value">
              <span class="type-icon">{{ type.icon }}</span>
              <span class="type-label">{{ type.label.split(' ').slice(1).join(' ') }}</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- EstadÃ­sticas en tiempo real -->
    <div class="stats-bar" *ngIf="attendanceRecords.length > 0">
      <div class="stat-item success">
        <span class="stat-icon">âœ…</span>
        <span class="stat-count">{{ attendanceStats.presente }}</span>
        <span class="stat-label">Presentes</span>
        <span class="stat-percentage">({{ getPercentage('presente') }}%)</span>
      </div>
      <div class="stat-item warning">
        <span class="stat-icon">ğŸ“š</span>
        <span class="stat-count">{{ attendanceStats.escuela }}</span>
        <span class="stat-label">Escuela</span>
        <span class="stat-percentage">({{ getPercentage('escuela') }}%)</span>
      </div>
      <div class="stat-item info">
        <span class="stat-icon">ğŸ¤’</span>
        <span class="stat-count">{{ attendanceStats.enfermedad }}</span>
        <span class="stat-label">Enfermedad</span>
        <span class="stat-percentage">({{ getPercentage('enfermedad') }}%)</span>
      </div>
      <div class="stat-item danger">
        <span class="stat-icon">âŒ</span>
        <span class="stat-count">{{ attendanceStats.falta }}</span>
        <span class="stat-label">Faltas</span>
        <span class="stat-percentage">({{ getPercentage('falta') }}%)</span>
      </div>
    </div>

    <!-- Herramientas rÃ¡pidas -->
    <div class="quick-tools" *ngIf="showQuickActions">
      <div class="tools-header">
        <h3>ğŸš€ Acciones RÃ¡pidas</h3>
        <button class="toggle-btn" (click)="showQuickActions = !showQuickActions">
          {{ showQuickActions ? 'â–¼' : 'â–¶' }}
        </button>
      </div>
      <div class="tools-content">
        <div class="search-box">
          <input 
            type="text" 
            [(ngModel)]="searchTerm" 
            placeholder="ğŸ” Buscar integrante..." 
            class="search-input">
        </div>
        <div class="bulk-actions">
          <span class="bulk-label">Marcar a todos como:</span>
          <button 
            *ngFor="let status of statusOptions"
            class="bulk-btn"
            [class]="'bulk-btn-' + status.color"
            (click)="markAllAs(status.value)">
            {{ status.icon }} {{ status.label }}
          </button>
        </div>
      </div>
    </div>

    <!-- Lista de asistencia estilo escolar -->
    <div class="class-list">
      <div class="list-header">
        <h3>ğŸ‘¥ Lista de Integrantes ({{ getFilteredUsers().length }})</h3>
      </div>
      
      <div class="student-list">
        <div 
          *ngFor="let user of getFilteredUsers(); let i = index" 
          class="student-row"
          [class]="'status-' + getUserStatus(user.uid)">
          
          <div class="student-info">
            <span class="student-number">{{ i + 1 }}.</span>
            <span class="student-name">{{ user.name }}</span>
            <span class="status-indicator" [innerHTML]="getStatusIcon(getUserStatus(user.uid))"></span>
          </div>
          
          <div class="attendance-controls">
            <button 
              *ngFor="let status of statusOptions"
              class="attendance-btn"
              [class.active]="getUserStatus(user.uid) === status.value"
              [class]="'btn-' + status.color"
              (click)="updateAttendanceStatus(user.uid, status.value)"
              [title]="status.label">
              {{ status.icon }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- BotÃ³n de guardar prominente -->
    <div class="save-section">
      <button 
        class="save-btn" 
        (click)="saveAttendance()"
        [disabled]="!attendanceType || !attendanceDate">
        <span class="save-icon">ğŸ’¾</span>
        <span class="save-text">Guardar Lista de Asistencia</span>
        <span class="save-count">({{ attendanceStats.total }} integrantes)</span>
      </button>
      
      <button class="reset-btn" (click)="resetForm()" type="button">
        ğŸ”„ Reiniciar
      </button>
    </div>
  </main>
</div>